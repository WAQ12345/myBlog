import{_ as i,c as a,o as n,ag as e}from"./chunks/framework.B-vhMDQ8.js";const c=JSON.parse('{"title":"Qwen-Code CLI 安装教程","description":"","frontmatter":{},"headers":[],"relativePath":"notes/tools/qwen/qwen-code.md","filePath":"notes/tools/qwen/qwen-code.md"}'),l={name:"notes/tools/qwen/qwen-code.md"};function t(p,s,h,r,d,k){return n(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="qwen-code-cli-安装教程" tabindex="-1">Qwen-Code CLI 安装教程 <a class="header-anchor" href="#qwen-code-cli-安装教程" aria-label="Permalink to &quot;Qwen-Code CLI 安装教程&quot;">​</a></h1><blockquote><p>Qwen-Code 是阿里通义千问推出的开源 AI 编程代理，运行在终端中，帮助你快速将想法转化为代码。</p><p>项目地址：<a href="https://github.com/QwenLM/qwen-code" target="_blank" rel="noreferrer">QwenLM/qwen-code</a></p></blockquote><h2 id="前置要求" tabindex="-1">前置要求 <a class="header-anchor" href="#前置要求" aria-label="Permalink to &quot;前置要求&quot;">​</a></h2><table tabindex="0"><thead><tr><th>项目</th><th>要求</th></tr></thead><tbody><tr><td>Node.js</td><td><strong>v20 及以上版本</strong></td></tr><tr><td>npm</td><td>随 Node.js 一同安装即可</td></tr></tbody></table><hr><h2 id="macos-zsh-nvm-环境" tabindex="-1">macOS（zsh + nvm 环境） <a class="header-anchor" href="#macos-zsh-nvm-环境" aria-label="Permalink to &quot;macOS（zsh + nvm 环境）&quot;">​</a></h2><h3 id="一、环境说明" tabindex="-1">一、环境说明 <a class="header-anchor" href="#一、环境说明" aria-label="Permalink to &quot;一、环境说明&quot;">​</a></h3><table tabindex="0"><thead><tr><th>配置项</th><th>具体信息</th></tr></thead><tbody><tr><td>操作系统</td><td>macOS</td></tr><tr><td>终端</td><td>zsh</td></tr><tr><td>Node.js 管理工具</td><td>nvm（Node 版本：v20.19.3）</td></tr><tr><td>核心问题</td><td>npm 全局安装 qwen-code 后，执行 <code>qwen-code -V</code> 提示 <code>zsh: command not found: qwen-code</code></td></tr></tbody></table><h3 id="二、核心问题分析" tabindex="-1">二、核心问题分析 <a class="header-anchor" href="#二、核心问题分析" aria-label="Permalink to &quot;二、核心问题分析&quot;">​</a></h3><ol><li>npm 全局安装 qwen-code 后，未自动生成可执行文件的软链接到 nvm 对应 Node 版本的 <code>bin</code> 目录；</li><li>qwen-code 包的入口文件为根目录的 <code>cli.js</code>（无 <code>bin</code> 子目录），与常规包结构不同，导致默认软链接生成逻辑失效；</li><li>zsh 环境变量未正确识别 nvm 对应 Node 版本的 <code>bin</code> 路径。</li></ol><h3 id="三、完整解决步骤" tabindex="-1">三、完整解决步骤 <a class="header-anchor" href="#三、完整解决步骤" aria-label="Permalink to &quot;三、完整解决步骤&quot;">​</a></h3><h4 id="步骤-1-确认-npm-全局安装路径" tabindex="-1">步骤 1：确认 npm 全局安装路径 <a class="header-anchor" href="#步骤-1-确认-npm-全局安装路径" aria-label="Permalink to &quot;步骤 1：确认 npm 全局安装路径&quot;">​</a></h4><p>执行命令获取 npm 全局前缀（后续所有路径均基于此）：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prefix</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>本环境输出示例</strong>：<code>/Users/waq/.nvm/versions/node/v20.19.3</code></p><h4 id="步骤-2-验证-qwen-code-包安装状态" tabindex="-1">步骤 2：验证 qwen-code 包安装状态 <a class="header-anchor" href="#步骤-2-验证-qwen-code-包安装状态" aria-label="Permalink to &quot;步骤 2：验证 qwen-code 包安装状态&quot;">​</a></h4><p>确认包已成功安装到全局 <code>node_modules</code>：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/lib/node_modules</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> qwen-code</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>预期输出</strong>：<code>@qwen-code</code>（无输出则需重新执行安装：<code>npm install -g @qwen-code/qwen-code --force</code>）</p><h4 id="步骤-3-定位-qwen-code-真实入口文件" tabindex="-1">步骤 3：定位 qwen-code 真实入口文件 <a class="header-anchor" href="#步骤-3-定位-qwen-code-真实入口文件" aria-label="Permalink to &quot;步骤 3：定位 qwen-code 真实入口文件&quot;">​</a></h4><p>进入包目录并确认核心可执行文件：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/lib/node_modules/@qwen-code/qwen-code</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -la</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>关键结果</strong>：包根目录下存在 <code>cli.js</code>（这是 qwen-code 的核心入口文件）</p><h4 id="步骤-4-手动创建软链接-核心步骤" tabindex="-1">步骤 4：手动创建软链接（核心步骤） <a class="header-anchor" href="#步骤-4-手动创建软链接-核心步骤" aria-label="Permalink to &quot;步骤 4：手动创建软链接（核心步骤）&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 获取 npm 全局前缀，避免硬编码路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NPM_PREFIX</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 删除可能存在的无效软链接</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $NPM_PREFIX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin/qwen-code</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 创建指向真实 cli.js 的软链接</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $NPM_PREFIX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/lib/node_modules/@qwen-code/qwen-code/cli.js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $NPM_PREFIX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin/qwen-code</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 赋予 cli.js 执行权限</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $NPM_PREFIX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/lib/node_modules/@qwen-code/qwen-code/cli.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="步骤-5-配置-zsh-环境变量并生效" tabindex="-1">步骤 5：配置 zsh 环境变量并生效 <a class="header-anchor" href="#步骤-5-配置-zsh-环境变量并生效" aria-label="Permalink to &quot;步骤 5：配置 zsh 环境变量并生效&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 编辑 zsh 配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在文件末尾粘贴以下内容（路径替换为步骤 1 的实际输出）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config get prefix)/bin:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 保存文件后，执行命令使配置立即生效</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="步骤-6-验证安装结果" tabindex="-1">步骤 6：验证安装结果 <a class="header-anchor" href="#步骤-6-验证安装结果" aria-label="Permalink to &quot;步骤 6：验证安装结果&quot;">​</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">qwen-code</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -V</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>预期输出</strong>：显示 qwen-code 的版本号（如 <code>1.0.x</code>），说明配置成功。</p><h3 id="四、兜底方案-若步骤-6-仍异常" tabindex="-1">四、兜底方案（若步骤 6 仍异常） <a class="header-anchor" href="#四、兜底方案-若步骤-6-仍异常" aria-label="Permalink to &quot;四、兜底方案（若步骤 6 仍异常）&quot;">​</a></h3><p>若执行 <code>qwen-code -V</code> 仍报错，可直接通过 node 调用入口文件（绕开软链接/环境变量）：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/lib/node_modules/@qwen-code/qwen-code/cli.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -V</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>若该命令能显示版本号：说明包本身无问题，重新执行 <code>source ~/.zshrc</code> 即可；</li><li>若该命令仍报错：重新执行安装命令 <code>npm install -g @qwen-code/qwen-code --force</code>。</li></ul><h3 id="五、注意事项" tabindex="-1">五、注意事项 <a class="header-anchor" href="#五、注意事项" aria-label="Permalink to &quot;五、注意事项&quot;">​</a></h3><ol><li><strong>路径适配</strong>：若你的 nvm 管理的 Node 版本不是 v20.19.3，需将命令中的路径替换为 <code>npm config get prefix</code> 输出的实际路径；</li><li><strong>权限问题</strong>：操作中若提示 <code>Permission denied</code>，在命令前添加 <code>sudo</code>（如 <code>sudo ln -s ...</code>）；</li><li><strong>终端重启</strong>：若重启终端后命令失效，重新执行 <code>source ~/.zshrc</code> 即可。</li></ol><hr><h2 id="windows-环境" tabindex="-1">Windows 环境 <a class="header-anchor" href="#windows-环境" aria-label="Permalink to &quot;Windows 环境&quot;">​</a></h2><h3 id="一、环境说明-1" tabindex="-1">一、环境说明 <a class="header-anchor" href="#一、环境说明-1" aria-label="Permalink to &quot;一、环境说明&quot;">​</a></h3><table tabindex="0"><thead><tr><th>配置项</th><th>具体信息</th></tr></thead><tbody><tr><td>操作系统</td><td>Windows 10 / 11</td></tr><tr><td>终端</td><td>CMD（命令提示符）/ PowerShell / Windows Terminal</td></tr><tr><td>Node.js</td><td>v20 及以上版本</td></tr><tr><td>包管理器</td><td>npm（随 Node.js 安装）</td></tr></tbody></table><h3 id="二、安装-node-js-如已安装可跳过" tabindex="-1">二、安装 Node.js（如已安装可跳过） <a class="header-anchor" href="#二、安装-node-js-如已安装可跳过" aria-label="Permalink to &quot;二、安装 Node.js（如已安装可跳过）&quot;">​</a></h3><h4 id="方式-a-官网安装-推荐" tabindex="-1">方式 A：官网安装（推荐） <a class="header-anchor" href="#方式-a-官网安装-推荐" aria-label="Permalink to &quot;方式 A：官网安装（推荐）&quot;">​</a></h4><ol><li>访问 <a href="https://nodejs.org/" target="_blank" rel="noreferrer">Node.js 官网</a>，下载 <strong>LTS 版本</strong>（v20+）的 Windows 安装包（<code>.msi</code>）；</li><li>双击安装包，按照提示完成安装（<strong>勾选 &quot;Add to PATH&quot;</strong>，默认已勾选）；</li><li>安装完成后，打开 <strong>CMD</strong> 或 <strong>PowerShell</strong>，验证安装：</li></ol><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">node </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">v</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">v</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="方式-b-通过-nvm-windows-管理-多版本场景推荐" tabindex="-1">方式 B：通过 nvm-windows 管理（多版本场景推荐） <a class="header-anchor" href="#方式-b-通过-nvm-windows-管理-多版本场景推荐" aria-label="Permalink to &quot;方式 B：通过 nvm-windows 管理（多版本场景推荐）&quot;">​</a></h4><p>如果你需要管理多个 Node.js 版本，推荐使用 <a href="https://github.com/coreybutler/nvm-windows" target="_blank" rel="noreferrer">nvm-windows</a>：</p><ol><li>前往 <a href="https://github.com/coreybutler/nvm-windows/releases" target="_blank" rel="noreferrer">nvm-windows Releases</a> 下载最新的 <code>nvm-setup.exe</code>；</li><li>双击安装，按提示完成；</li><li>安装完成后，打开新的终端窗口：</li></ol><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装 Node.js v20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nvm install </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 切换到 v20</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nvm use </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 验证</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">node </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">v</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">v</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="三、安装-qwen-code" tabindex="-1">三、安装 Qwen-Code <a class="header-anchor" href="#三、安装-qwen-code" aria-label="Permalink to &quot;三、安装 Qwen-Code&quot;">​</a></h3><p>提供三种安装方式，任选其一。</p><h4 id="方式-1-一键脚本安装-推荐" tabindex="-1">方式 1：一键脚本安装（推荐） <a class="header-anchor" href="#方式-1-一键脚本安装-推荐" aria-label="Permalink to &quot;方式 1：一键脚本安装（推荐）&quot;">​</a></h4><p>以 <strong>管理员身份</strong> 打开 CMD（命令提示符），执行：</p><div class="language-cmd vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cmd</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">curl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fsSL </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">o </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TEMP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\\install</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qwen.bat https://qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">assets.oss</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hangzhou.aliyuncs.com/installation/install</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qwen.bat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> %</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TEMP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\\install</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qwen.bat</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p><strong>注意</strong>：安装完成后 <strong>务必重启终端</strong>，使环境变量生效。</p></blockquote><h4 id="方式-2-npm-全局安装" tabindex="-1">方式 2：npm 全局安装 <a class="header-anchor" href="#方式-2-npm-全局安装" aria-label="Permalink to &quot;方式 2：npm 全局安装&quot;">​</a></h4><p>打开 CMD 或 PowerShell，执行：</p><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm install </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g @qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code@latest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>安装完成后验证：</p><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">V</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="方式-3-从源码安装" tabindex="-1">方式 3：从源码安装 <a class="header-anchor" href="#方式-3-从源码安装" aria-label="Permalink to &quot;方式 3：从源码安装&quot;">​</a></h4><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">git clone https:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">//</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">github.com</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">QwenLM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code.git</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cd qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm install</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm install </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g .</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="四、常见问题及解决" tabindex="-1">四、常见问题及解决 <a class="header-anchor" href="#四、常见问题及解决" aria-label="Permalink to &quot;四、常见问题及解决&quot;">​</a></h3><h4 id="问题-1-qwen-code-不是内部或外部命令" tabindex="-1">问题 1：<code>qwen-code</code> 不是内部或外部命令 <a class="header-anchor" href="#问题-1-qwen-code-不是内部或外部命令" aria-label="Permalink to &quot;问题 1：\`qwen-code\` 不是内部或外部命令&quot;">​</a></h4><p><strong>原因</strong>：npm 全局 <code>bin</code> 目录不在系统 <code>PATH</code> 中。</p><p><strong>解决步骤</strong>：</p><ol><li>查看 npm 全局 bin 目录：</li></ol><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm config get prefix</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>输出示例：<code>C:\\Users\\你的用户名\\AppData\\Roaming\\npm</code></p><ol start="2"><li><p>将该路径添加到系统环境变量：</p><ul><li>按 <code>Win + S</code>，搜索 <strong>&quot;环境变量&quot;</strong>，点击 <strong>&quot;编辑系统环境变量&quot;</strong>；</li><li>点击 <strong>&quot;环境变量&quot;</strong> 按钮；</li><li>在 <strong>&quot;用户变量&quot;</strong> 中找到 <code>Path</code>，双击编辑；</li><li>点击 <strong>&quot;新建&quot;</strong>，粘贴上一步输出的路径（如 <code>C:\\Users\\你的用户名\\AppData\\Roaming\\npm</code>）；</li><li>依次点击 <strong>&quot;确定&quot;</strong> 保存。</li></ul></li><li><p><strong>关闭并重新打开终端</strong>，再次验证：</p></li></ol><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">V</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="问题-2-npm-安装速度慢或超时" tabindex="-1">问题 2：npm 安装速度慢或超时 <a class="header-anchor" href="#问题-2-npm-安装速度慢或超时" aria-label="Permalink to &quot;问题 2：npm 安装速度慢或超时&quot;">​</a></h4><p><strong>解决</strong>：切换 npm 镜像源为国内镜像：</p><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 切换为淘宝镜像</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm config set registry https:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">//</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">registry.npmmirror.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 然后重新安装</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm install </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g @qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code@latest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="问题-3-权限不足-eperm-错误" tabindex="-1">问题 3：权限不足（EPERM 错误） <a class="header-anchor" href="#问题-3-权限不足-eperm-错误" aria-label="Permalink to &quot;问题 3：权限不足（EPERM 错误）&quot;">​</a></h4><p><strong>解决</strong>：以管理员身份运行终端：</p><ul><li>在开始菜单搜索 <strong>CMD</strong> 或 <strong>PowerShell</strong>；</li><li>右键点击，选择 <strong>&quot;以管理员身份运行&quot;</strong>；</li><li>重新执行安装命令。</li></ul><p>或者修改 npm 全局安装目录的权限：</p><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看全局目录</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm config get prefix</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 给当前用户赋予完全控制权限（替换为实际路径）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">icacls </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;C:\\Users\\你的用户名\\AppData\\Roaming\\npm&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">grant </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">USERNAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:F </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">T</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="问题-4-使用-nvm-windows-时找不到命令" tabindex="-1">问题 4：使用 nvm-windows 时找不到命令 <a class="header-anchor" href="#问题-4-使用-nvm-windows-时找不到命令" aria-label="Permalink to &quot;问题 4：使用 nvm-windows 时找不到命令&quot;">​</a></h4><p><strong>解决</strong>：</p><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 确认当前使用的 Node 版本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nvm list</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 确保已切换到正确版本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nvm use </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重新安装</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm install </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g @qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code@latest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="五、验证安装结果" tabindex="-1">五、验证安装结果 <a class="header-anchor" href="#五、验证安装结果" aria-label="Permalink to &quot;五、验证安装结果&quot;">​</a></h3><p>安装成功后，打开一个 <strong>新的</strong> 终端窗口，执行：</p><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">V</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>显示版本号即表示安装成功。</p><h3 id="六、兜底方案" tabindex="-1">六、兜底方案 <a class="header-anchor" href="#六、兜底方案" aria-label="Permalink to &quot;六、兜底方案&quot;">​</a></h3><p>若以上方法均无法正常使用 <code>qwen-code</code> 命令，可通过 <code>npx</code> 直接运行（无需全局安装）：</p><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npx @qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code@latest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>或直接通过 node 调用入口文件：</p><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">node </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">APPDATA</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\\npm\\node_modules\\@qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code\\qwen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code\\cli.js </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">V</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><hr><h2 id="认证与登录" tabindex="-1">认证与登录 <a class="header-anchor" href="#认证与登录" aria-label="Permalink to &quot;认证与登录&quot;">​</a></h2><p>安装完成后，首次运行 <code>qwen-code</code> 需要进行认证，支持两种方式：</p><table tabindex="0"><thead><tr><th>方式</th><th>说明</th></tr></thead><tbody><tr><td><strong>Qwen OAuth（推荐）</strong></td><td>免费使用，在浏览器中登录 qwen.ai 账号即可</td></tr><tr><td><strong>OpenAI 兼容 API</strong></td><td>设置 <code>OPENAI_API_KEY</code> 环境变量，可选配置自定义 base URL 和模型</td></tr></tbody></table><hr><h2 id="核心总结" tabindex="-1">核心总结 <a class="header-anchor" href="#核心总结" aria-label="Permalink to &quot;核心总结&quot;">​</a></h2><table tabindex="0"><thead><tr><th>平台</th><th>关键步骤</th><th>常见问题</th></tr></thead><tbody><tr><td>macOS</td><td>手动创建软链接 + 配置 zsh 环境变量 + 赋予执行权限</td><td>软链接失效、PATH 未生效</td></tr><tr><td>Windows</td><td>npm 全局安装或一键脚本 + 确认 PATH 环境变量</td><td>命令未找到、权限不足、镜像超时</td></tr></tbody></table><p>验证标准：执行 <code>qwen-code -V</code> 能显示版本号，即为安装成功。</p>`,98)])])}const g=i(l,[["render",t]]);export{c as __pageData,g as default};
